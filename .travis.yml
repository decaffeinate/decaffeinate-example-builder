language: node_js
node_js:
  - "6"
env:
  global:
    - CXX=g++-4.8
  matrix:
    - PROJECT=atom
    - PROJECT=autoprefixer
    - PROJECT=codecombat
    - PROJECT=coffeelint
    - PROJECT=coffeescript
    - PROJECT=hubot
before_install:
  - openssl aes-256-cbc -K $encrypted_ca0e70ee0db9_key -iv $encrypted_ca0e70ee0db9_iv -in id_rsa.enc -out ~/.ssh/id_rsa -d
  - chmod 600 ~/.ssh/id_rsa
  - git config --global user.name 'decaffeinate bot'
  - git config --global user.email 'decaffeinatebot@gmail.com'
  - npm install -g bulk-decaffeinate decaffeinate eslint jscodeshift
  - git clone https://github.com/decaffeinate/decaffeinate-examples.git
script:
  - cd decaffeinate-examples
  - npm install
  - bin/example-runner ${PROJECT} --publish
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - mongodb-upstart
    packages:
    - build-essential
    - g++-4.8
    - clang-3.3
    - fakeroot
    - git
    - libgnome-keyring-dev
    - rpm
    - libx11-dev
    - libxkbfile-dev
    - mongodb-org-server
  firefox: "52.0"
